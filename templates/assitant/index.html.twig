{% extends 'base.html.twig' %}

{% block body %}
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.css" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/google-calendar@6.1.19/index.global.min.js"></script>

    <div id="calendar"></div>

    <button id="createEventBtn">Cr√©er un √©v√©nement test</button>


    <script>
        document.addEventListener('DOMContentLoaded', function() {

            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {

                initialView: 'dayGridMonth',

                // üëâ FullCalendar appelle ton backend Symfony et NON Google
                events: '/api/google-calendar/events'
            });

            calendar.render();
        });

        document.getElementById("createEventBtn").addEventListener("click", function() {

    fetch('/api/google-calendar/create', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            title: "√âv√©nement cr√©√© depuis Symfony",
            start: "2025-01-10T14:00:00",
            end:   "2025-01-10T15:00:00"
        })
    })
    .then(r => r.json())
    .then(data => {
        console.log(data);
        alert("√âv√©nement cr√©√© !");
    });
});
    </script>

{% endblock %}
